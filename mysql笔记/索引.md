<h1>索引

<h3>什么是索引？有什么用

​	索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。

​	在数据库方面，查询一张表时有两种查询方式：

​			第一种方式：全表扫描

​			第二种方式：根据索引检索（效率很高）

索引缩小了扫描的范围，但是不能随意的添加索引，因为索引也是数据库的对象，也需要数据库维护。

数据一旦修改，索引就需要重新排序进行维护。

​				*添加索引是给某个或某些字段添加的，当字段索引的时候，select语句会根据索引扫描，快速定位*

<h3>什么时候考虑给字段添加索引？

​	1.数据量庞大。（根据服务器环境）

​	2.该字段很少的DML操作。（索引也需要维护）

​	3.该字段经常出现在where子句中。（根据那个字段查询）

​	注意：主键和具有unique约束的字段会自动添加索引。

​		根据主键查询效率较高，尽量根据主键检索。

<h3>添加索引

```sql
create index emp_sal_index on emp(sal);#create index 索引名称 on 表名(字段名);
```

<h3>删除索引

```sql
drop index emp_sal_index on emp #drop index 索引名称 on 表名
```

<h3>实现原理

采用的数据结构：B+tree。

实现原理：

​				1.索引自动排序，分区。

​				2.查询时查看字段中有没有对应的对象，然后通过索引检索，假设ename = 'SMITH'，先定位到S区，再定位到M区.....缩短了扫描的数量，很快就定位到SMITH.

​				3.索引返回数据的物理地址，此时sql语句就自动变成了select ename from emp where 物理地址 = 0x3;

通过B Tree缩小扫描范围，底层索引进行了排序，分区，索引会携带数据再表中的”物理地址“，最终拖过索引检索到数据之后，获取到关联的物理地址，通过武力地址定位表中的数据，效率极高。

​		select ename from emp where ename  = 'SMITH';

​		通过索引转化为

​		select ename from emp where 物理地址 = 0x3;

<h3>索引的分类

​		单一索引：给单个字段添加索引。

​		复合索引：多个字段联合添加索引。

​		主键索引：主键上会自动添加索引。

​		唯一索引：有unique约束的字段上回自动添加索引。

<h3>索引什么时候失效

```sql
select ename from emp where ename like '%A%';#模糊查询的时候，第一个通配符使用的是%，此时索引会失效，效率下降。
```

